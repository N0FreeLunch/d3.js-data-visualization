# Selection

## 문서 객체 모델
- DOM이란 도큐먼트 오브젝트 모델(Document Object Model)이다.
- 문서 객체 모델로 번역이 된다.

### 저장소
- 문서 객체 모델에서 저장소란 문서를 의미한다. 곧 문서는 데이터를 저장하는 곳을 의미한다.
- 엄밀히는 HTML 문서를 브라우저가 읽고 HTML 구조를 브라우저가 매핑한 형태를 저장소라고 할 수 있다.
- 쉽게는 저장소란 HTML에서는 저장된 태그들의 집합이라고 할 수 있다.

### 모델
- 모델이라는 것은 어떤 저장소에 저장된 데이터를 조작하기 위한 기능에 해당한다.
- 문서 객체 모델의 저장소는 브라우저가 HTML 문서를 트리 구조로 매핑한 것에 해당하고 이를 조작하는 것이 모델이다.
- 브라우저가 제공하는 메모리에 매핑된 태그를 자바스크립트로 조작할 수 있는 기능을 브라우저가 제공한다.
- 그리고 자바스크립트는 이 조작할 수 있는 기능을 여러 방식으로 조작할 수 있다.
- 모델은 생성(create), 변경(update), 읽기(read), 삭제(delete) 기능을 제공한다. 이를 CURD라고 한다.

### 문서 객체 모델의 의미
- 자바스크립트는 HTML 문서의 태그를 조작할 수 있는 객체를 브라우저로 부터 제공 받는다.
- 문서 객체 모델을 통해서 브라우저의 메모리에 매핑되어 있는 태그들을 조작할 수 있다. CURD를 할 수 있는 것이다.
- 문서 객체 모델은 자바스크립트에서 `document.querySelector()` `document.getElementId()` `document.creaeElement()` 등을 사용해서 접근을 할 수 있다. 브라우저 자바스크립트에서 `document` 객체는 '문서 객체'를 의미한다.
- 문서 객체로 태그를 조작하는 모델 기능을 사용하는 것이다.


#### Node
- HTML의 태그는 트리 구조로 되어 있다. 그리고 브라우저는 태그를 트리 구조로 해석하여 문서 객체 모델에 태그 구조를 제공한다.
- 바닐라 자바스크립트에서 하나의 태그를 자바스크립트로 선택했을 때를 Node라고 부른다.
- 트리 구조의 브렌치를 연결하는 대상을 Node라고 하기 때문에 태그를 문서 객체 모델로 선택한 상태를 Node라고 부른다.


## D3의 문서 객체 모델
- 바닐라 자바스크립트에서는 문서 객체 모델로 `document` 객체가 있었다.
- d3도 `d3`가 문서 객체 모델의 역할을 한다.
- `d3`라는 문서 객체 모델을 활용해서 브라우저의 HTML 태그들을 조작할 수 있다. CURD 기능을 제공한다.
- 똑같이 자바스크립트로 HTML 태그들을 다루지만 `document`객체와 `d3`는 서로 다른 객체이다.
- 물론 `d3`로 선택된 돔 엘리먼트

## D3 문서 객체 모델의 메서드 분석
### selectAll
```
d3.selectAll("p")
```
- d3 객체의 메서드이다.
- 브라우저 돔에 존재하는 모든 p 태그를 선택하라는 의미이다.
- d3의 돔 엘리먼트가 반환(return)된다. d3의 돔 엘리먼트는 vanilla js의 돔 엘리먼트와는 다른 형태의 객체이다.
- All이 접미어로 붙어 여러 태그를 선택하는 방식이므로 이 메서드를 통해서 생성된 d3 문서 객체 모델의 노드는

```
d3.selectAll("p").attr("class", "graf")
```
- attr 메서드로 p태그에 어트리뷰트를 추가할 수 있고, 선택된 태그가 브라우저에 랜더링 된 상태의 태그라면 속성이 바로 반영이 된다.
- attr 메서드를 반환한 값도 d3의 노드이므로 d3의 노드가 가진 attr, style 메소드를 메소드 체이닝으로 붙여 나갈 수 있다.
```
d3.selectAll("p")
.attr("class", "graf")
.style("color", "red")
```

---

## Reference
- https://github.com/d3/d3-selection/blob/v3.0.0/README.md#selection
- https://developer.mozilla.org/ko/docs/Web/API/Document_Object_Model/Introduction
